// Generated by CoffeeScript 1.5.0

$(function() {
  var disable_button, got_tickets, number, render_histories;
  got_tickets = [0];
  number = -1;
  render_histories = function(number) {
    if (number !== -1) {
      return $('#histories').append("<li>" + number + "</li>");
    }
  };
  disable_button = function() {
    return $('button#start-lots').attr('disabled', true) && $(document).off('click', 'button#start-lots');
  };
  return $(document).on('click', 'button#start-lots', function() {
    var tickets_amount;
    tickets_amount = Number($('input[name="tickets-amount"]').val());
    while (true) {
      if (got_tickets.length >= (tickets_amount + 1)) {
        number = -1;
        disable_button();
        break;
      }
      number = parseInt((Math.random() * tickets_amount) + 1, 10);
      if ($.inArray(number, got_tickets) === -1) {
        break;
      }
    }
    got_tickets.push(number);
    $('span#ticket-number').text(number);
    return render_histories(number);
  });
});
